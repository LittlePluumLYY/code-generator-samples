<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.generator.mapper.SysUserDao">

    <resultMap id="sysUserResultMap" type="com.generator.model.SysUser">
        <id column="id" property="id"/>
        <result column="username" property="username"/>
        <result column="password" property="password"/>
        <result column="name" property="name"/>
        <result column="phone" property="phone"/>
        <result column="is_enable" property="isEnable"/>
        <result column="comment" property="comment"/>
        <result column="create_time" property="createTime"/>
        <result column="update_time" property="updateTime"/>
    </resultMap>

  	<sql id="Where_Clause">
      <where>
        <if test="id != null">
            AND id = #{id}
        </if>
        <if test="username != null and username != '' ">
            AND username = #{username}
        </if>
        <if test="password != null and password != '' ">
            AND password = #{password}
        </if>
        <if test="name != null and name != '' ">
            AND name = #{name}
        </if>
        <if test="phone != null and phone != '' ">
            AND phone = #{phone}
        </if>
        <if test="isEnable != null">
            AND is_enable = #{isEnable}
        </if>
        <if test="comment != null and comment != '' ">
            AND comment = #{comment}
        </if>
        <if test="createTime != null">
            AND create_time = #{createTime}
        </if>
        <if test="updateTime != null">
            AND update_time = #{updateTime}
        </if>
      </where>
  	</sql>

    <sql id="Base_Column_List">
        id,
        username,
        password,
        name,
        phone,
        is_enable,
        comment,
        create_time,
        update_time
    </sql>

    <!-- 新增数据 -->
	<insert id="insertSysUser" parameterType="com.generator.model.SysUser">
        INSERT INTO management.sys_user (
            <trim suffixOverrides=",">
                <if test="id != null">id,</if>
                <if test="username != null">username,</if>
                <if test="password != null">password,</if>
                <if test="name != null">name,</if>
                <if test="phone != null">phone,</if>
                <if test="isEnable != null">is_enable,</if>
                <if test="comment != null">comment,</if>
                <if test="createTime != null">create_time,</if>
                <if test="updateTime != null">update_time,</if>
            </trim>
        ) VALUES (
            <trim suffixOverrides=",">
                <if test="id != null">#{id,jdbcType=bigint},</if>
                <if test="username != null">#{username,jdbcType=VARCHAR},</if>
                <if test="password != null">#{password,jdbcType=VARCHAR},</if>
                <if test="name != null">#{name,jdbcType=VARCHAR},</if>
                <if test="phone != null">#{phone,jdbcType=VARCHAR},</if>
                <if test="isEnable != null">#{isEnable,jdbcType=tinyint},</if>
                <if test="comment != null">#{comment,jdbcType=VARCHAR},</if>
                <if test="createTime != null">#{createTime,jdbcType=timestamp},</if>
                <if test="updateTime != null">#{updateTime,jdbcType=timestamp},</if>
            </trim>
        )
	</insert>

    <!-- 根据主键删除数据 -->
	<delete id="deleteSysUserByPrimaryKey" parameterType="long">
        DELETE FROM management.sys_user
        WHERE id = #{id} 
	</delete>

    <!-- 根据传入参数删除数据 -->
	<delete id="deleteSysUserByWhere" parameterType="com.generator.model.SysUser">
        DELETE FROM management.sys_user
        <include refid="Where_Clause" />
	</delete>

    <!-- 根据主键更新数据 -->
    <update id="updateSysUserByPrimaryKey" parameterType="com.generator.model.SysUser">
		UPDATE management.sys_user
		<set>
			<if test="username != null">username = #{username},</if>
			<if test="password != null">password = #{password},</if>
			<if test="name != null">name = #{name},</if>
			<if test="phone != null">phone = #{phone},</if>
			<if test="isEnable != null">is_enable = #{isEnable},</if>
			<if test="comment != null">comment = #{comment},</if>
			<if test="createTime != null">create_time = #{createTime},</if>
			<if test="updateTime != null">update_time = #{updateTime},</if>
		</set>
		WHERE
		 id = #{id}
	</update>

	<!-- 根据主键查询数据  -->
	<select id="querySysUserByPrimaryKey" resultMap="sysUserResultMap" parameterType="long">
        SELECT
        <include refid="Base_Column_List" />
  	     FROM management.sys_user
        WHERE
            id = #{id}
    </select>

	<!-- 根据传入参数查询数据列表  -->
	<select id="querySysUserListByWhere" resultMap="sysUserResultMap" parameterType="com.generator.model.SysUser">
        SELECT
        <include refid="Base_Column_List" />
  	     FROM management.sys_user
        <include refid="Where_Clause" />
    </select>

	<!-- 统计符合条件的数据数量 -->
	<select id="countByWhere" resultType="int" parameterType="com.generator.model.SysUser">
		SELECT COUNT(*) FROM management.sys_user
		<include refid="Where_Clause" />
	</select>

    <!-- 批量插入数据 -->
	<insert id="batchInsertSysUser" parameterType="java.util.List">
        INSERT INTO management.sys_user (
        <trim suffixOverrides=",">
				<if test="null != list[0].id">id,</if>
				<if test="null != list[0].username">username,</if>
				<if test="null != list[0].password">password,</if>
				<if test="null != list[0].name">name,</if>
				<if test="null != list[0].phone">phone,</if>
				<if test="null != list[0].isEnable">is_enable,</if>
				<if test="null != list[0].comment">comment,</if>
				<if test="null != list[0].createTime">create_time,</if>
				<if test="null != list[0].updateTime">update_time,</if>
        </trim>
        ) VALUES
        <foreach collection="list" item="item" index= "index" separator =",">
            (
            <trim suffixOverrides=",">
				<if test="null != item.id">#{item.id,jdbcType=bigint},</if>
				<if test="null != item.username">#{item.username,jdbcType=VARCHAR},</if>
				<if test="null != item.password">#{item.password,jdbcType=VARCHAR},</if>
				<if test="null != item.name">#{item.name,jdbcType=VARCHAR},</if>
				<if test="null != item.phone">#{item.phone,jdbcType=VARCHAR},</if>
				<if test="null != item.isEnable">#{item.isEnable,jdbcType=tinyint},</if>
				<if test="null != item.comment">#{item.comment,jdbcType=VARCHAR},</if>
				<if test="null != item.createTime">#{item.createTime,jdbcType=timestamp},</if>
				<if test="null != item.updateTime">#{item.updateTime,jdbcType=timestamp},</if>
            </trim>
            )
        </foreach>
    </insert>
</mapper>